<!DOCTYPE html>
<html>
   <head>
	 <title> Grambys Clicker </title>
    <meta name ="description" content="drive to grambys and buy stuff for wads lol"
    <meta charset="UTF-8">
      <link rel="stylesheet" href="style.css">
      <link rel="shortcut icon" href="images/grambicon.png" type="image/x-icon">  
 </head>
 <body>
       <center> <h1> ROAD TO GRAMBYS CLICKER GAME </h1> </center>
	 <h5> beta 1.0 lol </h5>
	 <span id="switchAppear"></span> <br> <br> <br>
    <hr>

	 <h1>MILE <span id="myText"></span></h1> 
	 <h2><span id="cash"></span> WADS</h2>
	<button id="button" style="border:1px solid transparent; background-color: transparent;" onclick="clicked()" type="button">
			<img id="image" src="images/carfricklet.png">
		
			
 <button title="Boosts your clicks per second by 0.2, automatically does 0.2 miles per second with a switch." style="float: right; border-radius: 25px; border: 3px solid #a4a4a4; background-color: #4f3b66;" onclick="buy(thrusters, throst, thrBoost, 0.2, 3, 3); document.getElementById('itemV').innerHTML='t';">
	<h3> <span id="thrustrs"></span> THRUSTERS </h3>   
	<img src="images/thruster.png"> 
	<h3> <span id="thrustcost"></span> WADS </h3>  </button> <br>
		<div id="grambyAppear">
		<button title="Boosts your clicks per second by 0.5." style="float: right; border-radius: 25px; border: 3px solid #a4a4a4; background-color: #4f3b66;" onclick="buy(grambys, grandCost, grandBoost, 0.5, 5, 5); document.getElementById('itemV').innerHTML='g';">
			<h3> <span id="grambe"></span> GRAMBYS </h3>
			<img width="144" height="143" src="images/gramby.png">
			<h3> <span id="grambuy"></span> WADS </h3>  </button>
		</div>
		
   <script>


		       

       //define vars
       if (localStorage.getItem("traveld") == null) {
	       localStorage.setItem("traveld", 0);
	       wareMiles = -1;
       }

       if (localStorage.getItem("money") == null) {
	    localStorage.setItem("money", 0);    
       }
       if (localStorage.getItem("truster") == null) {
	    localStorage.setItem("truster", 0);    
       }
       if (localStorage.getItem("granbi") == null) {
	   localStorage.setItem("granbi", 0);
	   }
	if (localStorage.getItem("lever") == null) {
	   localStorage.setItem("lever", 0);
	   }
       //upgrades
       var switc = localStorage.getItem("lever");
       var switcPrice = 15;
       //shop items
	var theoriticalWad = null;
	var grambys = localStorage.getItem("granbi");
	var grandCost = 0;
	var thrusters = localStorage.getItem("truster");
	var throst = 0;
	var thrBoost = thrusters * 0.2
	var grandBoost = grambys * 0.5
	throst = parseInt(thrusters);
	throst += 3;
	grandCost = parseInt(grambys);
	grandCost += 5;
	//autoMps
	   var autoMps = function() {
            autoMps = setInterval(function(){
	          miles = parseInt(plus);
	          plus += thrBoost;
	          wareMiles += thrBoost;
              if (wareMiles >= 10) {	
                 wadd += 1;
                 localStorage.setItem("money", wads);
                 wads = parseInt(wadd);
                 wadUpdate()
                 wareMiles = 0;
         }
             }, 1000);
            }
       //load game
       var boughtToday = false;
       var wareMiles = 0;
       var cpsBoost = 0 
       var miles = localStorage.getItem("traveld");
       var wads = localStorage.getItem("money");
       var plus = parseInt(miles);
       var wadd = parseInt(wads);
       wads = parseInt(wads);  
       if (miles >= 1) {
	       numberupdated()
       }
        if (wads >= 1) {
	wadUpdate()
	}
	if (switc >= 2) {
         autoMps()
	}
	loadSwitch()
	 grunlock()

	
	
	
      //functions
      function clicked() {
	  cpsBoost = 0;
	  cpsBoost += thrBoost + grandBoost;
	  miles = parseInt(plus);
	  plus += 1 + cpsBoost
	  wareMiles += 1 + cpsBoost;
	  localStorage.setItem("traveld", miles);
	  numberupdated();
	  localStorage.setItem("money", wads);
	  driveImage();
        if (wareMiles >= 10) {	
          wadd += 1;
          localStorage.setItem("money", wads);
          wads = parseInt(wadd);
          wadUpdate()
          wareMiles = 0;
       }
       }  
	function numberupdated () {
	(() => {
		document.getElementById("myText").innerHTML = miles;
		document.getElementById("thrustrs").innerHTML = thrusters;
		document.getElementById("thrustcost").innerHTML = throst;
	        document.getElementById("grambe").innerHTML = grambys;
		document.getElementById("grambuy").innerHTML = grandCost;
		//if (miles >= 115) {
		//	document.getElementById("grambyAppear").innerHTML = '<button title="Boosts your clicks per second by 0.5." style="float: right; border-radius: 25px; border: 3px solid #a4a4a4; background-color: #4f3b66;" onclick="buy(grambys, grandCost, grandBoost, 0.5, 5, 5); document.getElementById("itemV").innerHTML="g";"><h3> <span id="grambe"></span> GRAMBYS </h3><img width="144" height="143" src="images/gramby.png"><h3> <span id="grambuy"></span> WADS </h3>  </button>'
		//}
	})();
	}
	 function wadUpdate () {
	(() => {
		document.getElementById("cash").innerHTML = wads;
		wadd = parseInt(wads);
	})();
	}
	 //buy items
	      function buy(in1, in2, inBoost, boostIncrease, price, upscale) {
		   in2 = parseInt(in1) 
	           in2 += price
		   console.log(in2)
		   if (wads >= in2) {
			   theoreticalWad = wads;
			   if (boughtToday == false) {
				   
			   } else {
			   in2 -= in2 *=2;
			   theoreticalWad += in2; 
			   wads = parseInt(theoreticalWad);
			   localStorage.setItem("money", wads);
			   }
			   in2 = parseInt(in1);
			   in2 += 1; //change item by 1
			   console.log(in2)
			   in1 = parseInt(in2);
	                   in2 += upscale;
			   inBoost = in1 * boostIncrease;
			   wadUpdate()
			   boughtToday = true;
			   //what item does what
			   if (document.getElementById('itemV').innerHTML=='t') { // thruster
				          thrusters = in1;
				          throst = in2;
				          thrBoost = inBoost;
					  localStorage.setItem("truster", thrusters);
				          document.getElementById("thrustrs").innerHTML = thrusters;
		                          document.getElementById("thrustcost").innerHTML = throst;
			 	        if (switc == 0) {
				document.getElementById("switchAppear").innerHTML = '<button title="Thrusters now automatically drive you forward 0.2 miles."  style="float: left; border:1px solid transparent; background-color: transparent;" onclick="buy(switc, switcPrice, //shut, 0, 15, 0); document.getElementById("itemV").innerHTML="s1"; "> <h3> 15 WADS </h3> <img width="60" height="60" src="images/switch.png"></button>' 
					switc = 1;	
					localStorage.setItem("lever", switc);	
			    }
				   
			   } if (document.getElementById('itemV').innerHTML=='g') { // gramby
					  grambys = in1;
				          grandCost = in2;
				          grandBoost = inBoost;
					  localStorage.setItem("granbi", grambys);
				          document.getElementById("grambe").innerHTML = grambys;
		                          document.getElementById("grambuy").innerHTML = grandCost;
			   }
		 
			    if (document.getElementById('itemV').innerHTML=='s1') {// switch1
				   switc = 2;
				   localStorage.setItem("lever", switc);
				   document.getElementById("switchAppear").innerHTML = ""
			   
		   } 
		   }
	      }//nope
		      function grunlock() {
		      var ui1 = document.getElementById("grambyAppear");
                           if (ui1.style.display === "none") {
                            ui1.style.display = "block";
                            } else {
                                ui1.style.display = "none";
  }
}
	
	
	 //wipe save function
	function wipeSave () {
		miles = 0;
		plus = 1;
	        wads = 0;
		wadd = 0;
		thrusters = 0;
		throst = 2;
		grambys = 0;
		grandCost = 5;
		thrBoost = 0;
		switc= 0;
		localStorage.setItem("lever", 0);
		localStorage.setItem("truster", thrusters);		
		localStorage.setItem("traveld", miles);
	        localStorage.setItem("money", wads);
	        document.getElementById("grambyAppear").innerHTML = ""
		document.getElementById("switchAppear").innerHTML = ""
		wadUpdate()
	        numberupdated()
	}
	function buttonFunction(){
     document.getElementById("buttonAppear").innerHTML = '<button onclick="wipeSave()">Confirm Wipe</button>';
       }
	   //button anim
	   var myHoverInterval = null;
var btn = document.getElementById("button");
btn.addEventListener("mouseover", function() {
    if (myHoverInterval != null) {
        return;
    }
    myHoverInterval = setInterval(function() {
    }, 1);
});
	   btn.addEventListener("mouseout", function() {
    if (myHoverInterval != null) {
        clearInterval(myHoverInterval);
        myHoverInterval = null;
	changeImage()
    }
});
function changeImage() {
var img = document.getElementById("image");
img.src="images/carfricklet2.png";
originalImage()
return false;
}

var originalImage = setInterval(function(){
var img = document.getElementById("image");
img.src="images/carfricklet.png";
return false;
}, 2000);
	   
function driveImage() {
var img = document.getElementById("image");
img.src="images/carfricklet3.png"
return false
}
// load upgrades
function loadSwitch() {
	console.log(switc)
if (switc == 1) {
	document.getElementById("switchAppear").innerHTML = '<button title="Thrusters now automatically drive you forward 0.2 miles." style="float: left; border:1px solid transparent; background-color: transparent;" onclick="buy(switc, switcPrice, //shut, 0, 15, 0); document.getElementById("itemV").innerHTML="s1"; "> <h3> 15 WADS </h3> <img width="60" height="60" src="images/switch.png"> </button>' 
}
}
	   
	 </script>
	 <br><br><br><br> <button onclick="buttonFunction()" type="button"> WIPE SAVE </button>
	 <span id="buttonAppear"></span>
     </body>
   </html>
